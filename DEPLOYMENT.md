# Floppy Bird 游戏部署说明

## 🚀 快速开始

### 1. 本地开发
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 预览构建结果
npm run preview
```

### 2. 生产构建
```bash
# 使用构建脚本（推荐）
chmod +x build.sh
./build.sh

# 或手动构建
npm run build
```

## 🔧 静态资源加载问题修复

### 问题描述
- 游戏静态资源经常无法更新和加载
- 需要反复强制刷新才能恢复正常
- 缓存策略不一致导致资源版本混乱

### 修复方案

#### 1. HTML 文件修复
- ✅ 移除了禁用缓存的 meta 标签
- ✅ 修复了资源路径（从绝对路径改为相对路径）
- ✅ 添加了版本控制脚本

#### 2. Vite 配置优化
- ✅ 添加了缓存破坏策略（文件名包含 hash）
- ✅ 优化了静态资源处理
- ✅ 改进了构建输出结构

## 📁 文件结构

```
floppybird/
├── src/                    # 源代码
│   └── main.js            # 主入口文件
├── assets/                 # 静态资源
├── css/                    # 样式文件
├── js/                     # JavaScript 库
├── dist/                   # 构建输出（构建后生成）
├── index.html              # 主页面
├── vite.config.js          # Vite 配置
├── build.sh                # 构建脚本
└── package.json            # 项目配置
```

## 🌐 部署步骤

### 1. 构建项目
```bash
./build.sh
```

### 2. 部署到你的服务器
- 将 `dist` 目录的内容上传到你的 web 服务器
- 根据你的服务器环境配置相应的缓存策略
- 确保静态资源路径正确

## 🔍 故障排除

### 静态资源无法加载
1. 检查文件路径是否正确
2. 确认服务器配置中的静态资源路径
3. 检查文件权限
4. 查看浏览器开发者工具的网络面板

### 缓存问题
1. 清除浏览器缓存
2. 检查服务器缓存配置
3. 确认文件名是否包含 hash

### 构建失败
1. 检查 Node.js 版本（建议 16+）
2. 删除 `node_modules` 重新安装
3. 查看构建日志

## 📝 注意事项

- 每次更新代码后需要重新构建
- 确保服务器配置中的路径正确
- 建议使用 HTTPS 部署
- 定期清理旧的构建文件

## 🆘 技术支持

如果遇到问题，请检查：
1. 浏览器控制台错误信息
2. 服务器错误日志
3. 构建脚本输出
4. 文件权限和路径配置
